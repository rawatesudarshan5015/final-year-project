"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/upload/route";
exports.ids = ["app/api/upload/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=E%3A%5CBE%20Project%5CBE-project%20ff%5CBE%20proj%205-2-25%5Cproject%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CBE%20Project%5CBE-project%20ff%5CBE%20proj%205-2-25%5Cproject&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=E%3A%5CBE%20Project%5CBE-project%20ff%5CBE%20proj%205-2-25%5Cproject%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CBE%20Project%5CBE-project%20ff%5CBE%20proj%205-2-25%5Cproject&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var E_BE_Project_BE_project_ff_BE_proj_5_2_25_project_src_app_api_upload_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/upload/route.ts */ \"(rsc)/./src/app/api/upload/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/upload/route\",\n        pathname: \"/api/upload\",\n        filename: \"route\",\n        bundlePath: \"app/api/upload/route\"\n    },\n    resolvedPagePath: \"E:\\\\BE Project\\\\BE-project ff\\\\BE proj 5-2-25\\\\project\\\\src\\\\app\\\\api\\\\upload\\\\route.ts\",\n    nextConfigOutput,\n    userland: E_BE_Project_BE_project_ff_BE_proj_5_2_25_project_src_app_api_upload_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/upload/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ1cGxvYWQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnVwbG9hZCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnVwbG9hZCUyRnJvdXRlLnRzJmFwcERpcj1FJTNBJTVDQkUlMjBQcm9qZWN0JTVDQkUtcHJvamVjdCUyMGZmJTVDQkUlMjBwcm9qJTIwNS0yLTI1JTVDcHJvamVjdCU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9RSUzQSU1Q0JFJTIwUHJvamVjdCU1Q0JFLXByb2plY3QlMjBmZiU1Q0JFJTIwcHJvaiUyMDUtMi0yNSU1Q3Byb2plY3QmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3VDO0FBQ3BIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29sbGVnZS11c2VyLW1hbmFnZW1lbnQvPzYxZGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiRTpcXFxcQkUgUHJvamVjdFxcXFxCRS1wcm9qZWN0IGZmXFxcXEJFIHByb2ogNS0yLTI1XFxcXHByb2plY3RcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcdXBsb2FkXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS91cGxvYWQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS91cGxvYWRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3VwbG9hZC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkU6XFxcXEJFIFByb2plY3RcXFxcQkUtcHJvamVjdCBmZlxcXFxCRSBwcm9qIDUtMi0yNVxcXFxwcm9qZWN0XFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXHVwbG9hZFxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvdXBsb2FkL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=E%3A%5CBE%20Project%5CBE-project%20ff%5CBE%20proj%205-2-25%5Cproject%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CBE%20Project%5CBE-project%20ff%5CBE%20proj%205-2-25%5Cproject&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/upload/route.ts":
/*!*************************************!*\
  !*** ./src/app/api/upload/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_cloudinary__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/cloudinary */ \"(rsc)/./src/lib/cloudinary.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n\n\n\n\nasync function POST(request) {\n    try {\n        console.log(\"Starting upload request processing\");\n        // Try to get token from Authorization header first\n        const authHeader = request.headers.get(\"Authorization\");\n        console.log(\"Auth header present:\", !!authHeader);\n        // Then try to get token from cookie\n        const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_3__.cookies)();\n        const tokenCookie = cookieStore.get(\"token\");\n        console.log(\"Cookie token present:\", !!tokenCookie);\n        let token = null;\n        let userId = null;\n        // Try Authorization header first\n        if (authHeader && authHeader.startsWith(\"Bearer \")) {\n            token = authHeader.split(\" \")[1];\n            console.log(\"Using token from Authorization header\");\n        } else if (tokenCookie) {\n            token = tokenCookie.value;\n            console.log(\"Using token from cookie\");\n        }\n        if (!token) {\n            console.log(\"No valid token found in either header or cookie\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Unauthorized - No valid token found\"\n            }, {\n                status: 401\n            });\n        }\n        try {\n            const user = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.verifyToken)(token);\n            userId = user.id;\n            console.log(\"User authenticated:\", userId);\n        } catch (error) {\n            console.error(\"Token verification failed:\", error);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Unauthorized - Invalid token\"\n            }, {\n                status: 401\n            });\n        }\n        // Process the upload\n        console.log(\"Parsing FormData from request\");\n        console.log(\"Content-Type:\", request.headers.get(\"content-type\"));\n        const formData = await request.formData();\n        // Log raw FormData information\n        const formDataEntries = Array.from(formData.entries());\n        console.log(\"FormData entries:\", formDataEntries.map((entry)=>({\n                key: entry[0],\n                value: entry[1] instanceof File ? `File: ${entry[1].name} (${entry[1].type})` : String(entry[1]),\n                isFile: entry[1] instanceof File\n            })));\n        const file = formData.get(\"file\");\n        const uploadType = formData.get(\"type\");\n        const isFile = (value)=>{\n            return value instanceof File;\n        };\n        console.log(\"Parsed form values:\", {\n            file: isFile(file) ? {\n                name: file.name,\n                type: file.type,\n                size: file.size\n            } : \"not a file\",\n            uploadType: {\n                value: uploadType,\n                type: typeof uploadType\n            }\n        });\n        // Validate file\n        if (!isFile(file)) {\n            console.log(\"File validation failed:\", {\n                hasFile: !!file,\n                type: file ? typeof file : \"undefined\"\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"No valid file provided\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate type\n        if (!uploadType || typeof uploadType !== \"string\") {\n            console.log(\"Type validation failed:\", {\n                uploadType,\n                type: typeof uploadType,\n                formDataKeys: Array.from(formData.keys())\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Upload type is required and must be a string\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate upload type value\n        if (![\n            \"profile\",\n            \"post\"\n        ].includes(uploadType)) {\n            console.log(\"Invalid upload type:\", uploadType);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: `Invalid upload type: ${uploadType}`\n            }, {\n                status: 400\n            });\n        }\n        try {\n            // Convert File to Buffer\n            const buffer = Buffer.from(await file.arrayBuffer());\n            console.log(\"File converted to buffer:\", {\n                originalSize: file.size,\n                bufferSize: buffer.length\n            });\n            // Upload to Cloudinary with appropriate folder\n            const folder = `${uploadType}s/${userId}`; // Organize by type and user\n            console.log(\"Uploading to Cloudinary:\", {\n                folder,\n                fileName: file.name,\n                fileType: file.type,\n                fileSize: file.size\n            });\n            const { url, public_id } = await (0,_lib_cloudinary__WEBPACK_IMPORTED_MODULE_1__.uploadToCloudinary)(buffer, folder);\n            console.log(\"Cloudinary upload successful:\", {\n                url,\n                public_id\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                url,\n                public_id\n            });\n        } catch (error) {\n            console.error(\"Upload processing error:\", error);\n            const errorMessage = error instanceof Error ? error.message : \"Upload failed\";\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: errorMessage\n            }, {\n                status: 500\n            });\n        }\n    } catch (error) {\n        console.error(\"Upload error:\", error);\n        const errorMessage = error instanceof Error ? error.message : \"Upload failed\";\n        console.error(\"Error details:\", errorMessage);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: errorMessage\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FBTyxDQUFDLEVBQUUsNEJBQTRCO1lBQ3ZFUixRQUFRQyxHQUFHLENBQUMsNEJBQTRCO2dCQUN0QzJDO2dCQUNBQyxVQUFVZCxLQUFLSixJQUFJO2dCQUNuQm1CLFVBQVVmLEtBQUtILElBQUk7Z0JBQ25CbUIsVUFBVWhCLEtBQUtFLElBQUk7WUFDckI7WUFFQSxNQUFNLEVBQUVlLEdBQUcsRUFBRUMsU0FBUyxFQUFFLEdBQUcsTUFBTXRELG1FQUFrQkEsQ0FBQzJDLFFBQVFNO1lBQzVENUMsUUFBUUMsR0FBRyxDQUFDLGlDQUFpQztnQkFBRStDO2dCQUFLQztZQUFVO1lBRTlELE9BQU92RCxxREFBWUEsQ0FBQ2tCLElBQUksQ0FBQztnQkFDdkJDLFNBQVM7Z0JBQ1RtQztnQkFDQUM7WUFDRjtRQUNGLEVBQUUsT0FBT25DLE9BQU87WUFDZGQsUUFBUWMsS0FBSyxDQUFDLDRCQUE0QkE7WUFDMUMsTUFBTW9DLGVBQWVwQyxpQkFBaUJxQyxRQUFRckMsTUFBTXNDLE9BQU8sR0FBRztZQUM5RCxPQUFPMUQscURBQVlBLENBQUNrQixJQUFJLENBQ3RCO2dCQUFFQyxTQUFTO2dCQUFPQyxPQUFPb0M7WUFBYSxHQUN0QztnQkFBRW5DLFFBQVE7WUFBSTtRQUVsQjtJQUNGLEVBQUUsT0FBT0QsT0FBTztRQUNkZCxRQUFRYyxLQUFLLENBQUMsaUJBQWlCQTtRQUMvQixNQUFNb0MsZUFBZXBDLGlCQUFpQnFDLFFBQVFyQyxNQUFNc0MsT0FBTyxHQUFHO1FBQzlEcEQsUUFBUWMsS0FBSyxDQUFDLGtCQUFrQm9DO1FBRWhDLE9BQU94RCxxREFBWUEsQ0FBQ2tCLElBQUksQ0FDdEI7WUFBRUMsU0FBUztZQUFPQyxPQUFPb0M7UUFBYSxHQUN0QztZQUFFbkMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb2xsZWdlLXVzZXItbWFuYWdlbWVudC8uL3NyYy9hcHAvYXBpL3VwbG9hZC9yb3V0ZS50cz81MTIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgdXBsb2FkVG9DbG91ZGluYXJ5IH0gZnJvbSAnQC9saWIvY2xvdWRpbmFyeSc7XHJcbmltcG9ydCB7IHZlcmlmeVRva2VuIH0gZnJvbSAnQC9saWIvYXV0aCc7XHJcbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogUmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgdXBsb2FkIHJlcXVlc3QgcHJvY2Vzc2luZycpO1xyXG4gICAgXHJcbiAgICAvLyBUcnkgdG8gZ2V0IHRva2VuIGZyb20gQXV0aG9yaXphdGlvbiBoZWFkZXIgZmlyc3RcclxuICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdBdXRob3JpemF0aW9uJyk7XHJcbiAgICBjb25zb2xlLmxvZygnQXV0aCBoZWFkZXIgcHJlc2VudDonLCAhIWF1dGhIZWFkZXIpO1xyXG4gICAgXHJcbiAgICAvLyBUaGVuIHRyeSB0byBnZXQgdG9rZW4gZnJvbSBjb29raWVcclxuICAgIGNvbnN0IGNvb2tpZVN0b3JlID0gY29va2llcygpO1xyXG4gICAgY29uc3QgdG9rZW5Db29raWUgPSBjb29raWVTdG9yZS5nZXQoJ3Rva2VuJyk7XHJcbiAgICBjb25zb2xlLmxvZygnQ29va2llIHRva2VuIHByZXNlbnQ6JywgISF0b2tlbkNvb2tpZSk7XHJcblxyXG4gICAgbGV0IHRva2VuID0gbnVsbDtcclxuICAgIGxldCB1c2VySWQgPSBudWxsO1xyXG4gICAgXHJcbiAgICAvLyBUcnkgQXV0aG9yaXphdGlvbiBoZWFkZXIgZmlyc3RcclxuICAgIGlmIChhdXRoSGVhZGVyICYmIGF1dGhIZWFkZXIuc3RhcnRzV2l0aCgnQmVhcmVyICcpKSB7XHJcbiAgICAgIHRva2VuID0gYXV0aEhlYWRlci5zcGxpdCgnICcpWzFdO1xyXG4gICAgICBjb25zb2xlLmxvZygnVXNpbmcgdG9rZW4gZnJvbSBBdXRob3JpemF0aW9uIGhlYWRlcicpO1xyXG4gICAgfVxyXG4gICAgLy8gRmFsbCBiYWNrIHRvIGNvb2tpZVxyXG4gICAgZWxzZSBpZiAodG9rZW5Db29raWUpIHtcclxuICAgICAgdG9rZW4gPSB0b2tlbkNvb2tpZS52YWx1ZTtcclxuICAgICAgY29uc29sZS5sb2coJ1VzaW5nIHRva2VuIGZyb20gY29va2llJyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF0b2tlbikge1xyXG4gICAgICBjb25zb2xlLmxvZygnTm8gdmFsaWQgdG9rZW4gZm91bmQgaW4gZWl0aGVyIGhlYWRlciBvciBjb29raWUnKTtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVW5hdXRob3JpemVkIC0gTm8gdmFsaWQgdG9rZW4gZm91bmQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdXNlciA9IHZlcmlmeVRva2VuKHRva2VuKTtcclxuICAgICAgdXNlcklkID0gdXNlci5pZDtcclxuICAgICAgY29uc29sZS5sb2coJ1VzZXIgYXV0aGVudGljYXRlZDonLCB1c2VySWQpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignVG9rZW4gdmVyaWZpY2F0aW9uIGZhaWxlZDonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1VuYXV0aG9yaXplZCAtIEludmFsaWQgdG9rZW4nIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUHJvY2VzcyB0aGUgdXBsb2FkXHJcbiAgICBjb25zb2xlLmxvZygnUGFyc2luZyBGb3JtRGF0YSBmcm9tIHJlcXVlc3QnKTtcclxuICAgIGNvbnNvbGUubG9nKCdDb250ZW50LVR5cGU6JywgcmVxdWVzdC5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJykpO1xyXG4gICAgXHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IGF3YWl0IHJlcXVlc3QuZm9ybURhdGEoKTtcclxuICAgIFxyXG4gICAgLy8gTG9nIHJhdyBGb3JtRGF0YSBpbmZvcm1hdGlvblxyXG4gICAgY29uc3QgZm9ybURhdGFFbnRyaWVzID0gQXJyYXkuZnJvbShmb3JtRGF0YS5lbnRyaWVzKCkpO1xyXG4gICAgY29uc29sZS5sb2coJ0Zvcm1EYXRhIGVudHJpZXM6JywgZm9ybURhdGFFbnRyaWVzLm1hcChlbnRyeSA9PiAoe1xyXG4gICAgICBrZXk6IGVudHJ5WzBdLFxyXG4gICAgICB2YWx1ZTogZW50cnlbMV0gaW5zdGFuY2VvZiBGaWxlIFxyXG4gICAgICAgID8gYEZpbGU6ICR7ZW50cnlbMV0ubmFtZX0gKCR7ZW50cnlbMV0udHlwZX0pYFxyXG4gICAgICAgIDogU3RyaW5nKGVudHJ5WzFdKSxcclxuICAgICAgaXNGaWxlOiBlbnRyeVsxXSBpbnN0YW5jZW9mIEZpbGVcclxuICAgIH0pKSk7XHJcblxyXG4gICAgY29uc3QgZmlsZSA9IGZvcm1EYXRhLmdldCgnZmlsZScpO1xyXG4gICAgY29uc3QgdXBsb2FkVHlwZSA9IGZvcm1EYXRhLmdldCgndHlwZScpO1xyXG4gICAgXHJcbiAgICBjb25zdCBpc0ZpbGUgPSAodmFsdWU6IEZvcm1EYXRhRW50cnlWYWx1ZSB8IG51bGwpOiB2YWx1ZSBpcyBGaWxlID0+IHtcclxuICAgICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgRmlsZTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCdQYXJzZWQgZm9ybSB2YWx1ZXM6Jywge1xyXG4gICAgICBmaWxlOiBpc0ZpbGUoZmlsZSkgPyB7XHJcbiAgICAgICAgbmFtZTogZmlsZS5uYW1lLFxyXG4gICAgICAgIHR5cGU6IGZpbGUudHlwZSxcclxuICAgICAgICBzaXplOiBmaWxlLnNpemVcclxuICAgICAgfSA6ICdub3QgYSBmaWxlJyxcclxuICAgICAgdXBsb2FkVHlwZToge1xyXG4gICAgICAgIHZhbHVlOiB1cGxvYWRUeXBlLFxyXG4gICAgICAgIHR5cGU6IHR5cGVvZiB1cGxvYWRUeXBlXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFZhbGlkYXRlIGZpbGVcclxuICAgIGlmICghaXNGaWxlKGZpbGUpKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdGaWxlIHZhbGlkYXRpb24gZmFpbGVkOicsIHsgXHJcbiAgICAgICAgaGFzRmlsZTogISFmaWxlLFxyXG4gICAgICAgIHR5cGU6IGZpbGUgPyB0eXBlb2YgZmlsZSA6ICd1bmRlZmluZWQnXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdObyB2YWxpZCBmaWxlIHByb3ZpZGVkJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFZhbGlkYXRlIHR5cGVcclxuICAgIGlmICghdXBsb2FkVHlwZSB8fCB0eXBlb2YgdXBsb2FkVHlwZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgY29uc29sZS5sb2coJ1R5cGUgdmFsaWRhdGlvbiBmYWlsZWQ6JywgeyBcclxuICAgICAgICB1cGxvYWRUeXBlLFxyXG4gICAgICAgIHR5cGU6IHR5cGVvZiB1cGxvYWRUeXBlLFxyXG4gICAgICAgIGZvcm1EYXRhS2V5czogQXJyYXkuZnJvbShmb3JtRGF0YS5rZXlzKCkpXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdVcGxvYWQgdHlwZSBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBhIHN0cmluZycgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWYWxpZGF0ZSB1cGxvYWQgdHlwZSB2YWx1ZVxyXG4gICAgaWYgKCFbJ3Byb2ZpbGUnLCAncG9zdCddLmluY2x1ZGVzKHVwbG9hZFR5cGUpKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdJbnZhbGlkIHVwbG9hZCB0eXBlOicsIHVwbG9hZFR5cGUpO1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGBJbnZhbGlkIHVwbG9hZCB0eXBlOiAke3VwbG9hZFR5cGV9YCB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIENvbnZlcnQgRmlsZSB0byBCdWZmZXJcclxuICAgICAgY29uc3QgYnVmZmVyID0gQnVmZmVyLmZyb20oYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpKTtcclxuICAgICAgY29uc29sZS5sb2coJ0ZpbGUgY29udmVydGVkIHRvIGJ1ZmZlcjonLCB7XHJcbiAgICAgICAgb3JpZ2luYWxTaXplOiBmaWxlLnNpemUsXHJcbiAgICAgICAgYnVmZmVyU2l6ZTogYnVmZmVyLmxlbmd0aFxyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIC8vIFVwbG9hZCB0byBDbG91ZGluYXJ5IHdpdGggYXBwcm9wcmlhdGUgZm9sZGVyXHJcbiAgICAgIGNvbnN0IGZvbGRlciA9IGAke3VwbG9hZFR5cGV9cy8ke3VzZXJJZH1gOyAvLyBPcmdhbml6ZSBieSB0eXBlIGFuZCB1c2VyXHJcbiAgICAgIGNvbnNvbGUubG9nKCdVcGxvYWRpbmcgdG8gQ2xvdWRpbmFyeTonLCB7XHJcbiAgICAgICAgZm9sZGVyLFxyXG4gICAgICAgIGZpbGVOYW1lOiBmaWxlLm5hbWUsXHJcbiAgICAgICAgZmlsZVR5cGU6IGZpbGUudHlwZSxcclxuICAgICAgICBmaWxlU2l6ZTogZmlsZS5zaXplXHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgeyB1cmwsIHB1YmxpY19pZCB9ID0gYXdhaXQgdXBsb2FkVG9DbG91ZGluYXJ5KGJ1ZmZlciwgZm9sZGVyKTtcclxuICAgICAgY29uc29sZS5sb2coJ0Nsb3VkaW5hcnkgdXBsb2FkIHN1Y2Nlc3NmdWw6JywgeyB1cmwsIHB1YmxpY19pZCB9KTtcclxuXHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICB1cmwsXHJcbiAgICAgICAgcHVibGljX2lkLFxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1VwbG9hZCBwcm9jZXNzaW5nIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVXBsb2FkIGZhaWxlZCc7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3JNZXNzYWdlIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1VwbG9hZCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVcGxvYWQgZmFpbGVkJztcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRldGFpbHM6JywgZXJyb3JNZXNzYWdlKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3JNZXNzYWdlIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn0gIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInVwbG9hZFRvQ2xvdWRpbmFyeSIsInZlcmlmeVRva2VuIiwiY29va2llcyIsIlBPU1QiLCJyZXF1ZXN0IiwiY29uc29sZSIsImxvZyIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwiZ2V0IiwiY29va2llU3RvcmUiLCJ0b2tlbkNvb2tpZSIsInRva2VuIiwidXNlcklkIiwic3RhcnRzV2l0aCIsInNwbGl0IiwidmFsdWUiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwic3RhdHVzIiwidXNlciIsImlkIiwiZm9ybURhdGEiLCJmb3JtRGF0YUVudHJpZXMiLCJBcnJheSIsImZyb20iLCJlbnRyaWVzIiwibWFwIiwiZW50cnkiLCJrZXkiLCJGaWxlIiwibmFtZSIsInR5cGUiLCJTdHJpbmciLCJpc0ZpbGUiLCJmaWxlIiwidXBsb2FkVHlwZSIsInNpemUiLCJoYXNGaWxlIiwiZm9ybURhdGFLZXlzIiwia2V5cyIsImluY2x1ZGVzIiwiYnVmZmVyIiwiQnVmZmVyIiwiYXJyYXlCdWZmZXIiLCJvcmlnaW5hbFNpemUiLCJidWZmZXJTaXplIiwibGVuZ3RoIiwiZm9sZGVyIiwiZmlsZU5hbWUiLCJmaWxlVHlwZSIsImZpbGVTaXplIiwidXJsIiwicHVibGljX2lkIiwiZXJyb3JNZXNzYWdlIiwiRXJyb3IiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/upload/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   verifyAuth: () => (/* binding */ verifyAuth),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction verifyToken(token) {\n    try {\n        if (!process.env.JWT_SECRET) {\n            throw new Error(\"JWT_SECRET is not defined\");\n        }\n        console.log(\"Verifying token with secret:\", process.env.JWT_SECRET);\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, process.env.JWT_SECRET);\n        console.log(\"Decoded token:\", decoded);\n        return decoded;\n    } catch (error) {\n        console.error(\"Token verification failed:\", error);\n        throw new Error(\"Invalid token\");\n    }\n}\nfunction generateToken(payload) {\n    if (!process.env.JWT_SECRET) {\n        throw new Error(\"JWT_SECRET is not defined\");\n    }\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign(payload, process.env.JWT_SECRET, {\n        expiresIn: \"24h\"\n    });\n}\nfunction verifyAuth(request) {\n    const token = request.headers.get(\"Authorization\")?.split(\" \")[1];\n    if (!token) {\n        throw new Error(\"Unauthorized\");\n    }\n    return verifyToken(token);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBK0I7QUFPeEIsU0FBU0MsWUFBWUMsS0FBYTtJQUN2QyxJQUFJO1FBQ0YsSUFBSSxDQUFDQyxRQUFRQyxHQUFHLENBQUNDLFVBQVUsRUFBRTtZQUMzQixNQUFNLElBQUlDLE1BQU07UUFDbEI7UUFDQUMsUUFBUUMsR0FBRyxDQUFDLGdDQUFnQ0wsUUFBUUMsR0FBRyxDQUFDQyxVQUFVO1FBQ2xFLE1BQU1JLFVBQVVULDBEQUFVLENBQUNFLE9BQU9DLFFBQVFDLEdBQUcsQ0FBQ0MsVUFBVTtRQUN4REUsUUFBUUMsR0FBRyxDQUFDLGtCQUFrQkM7UUFDOUIsT0FBT0E7SUFDVCxFQUFFLE9BQU9FLE9BQU87UUFDZEosUUFBUUksS0FBSyxDQUFDLDhCQUE4QkE7UUFDNUMsTUFBTSxJQUFJTCxNQUFNO0lBQ2xCO0FBQ0Y7QUFFTyxTQUFTTSxjQUFjQyxPQUFzQztJQUNsRSxJQUFJLENBQUNWLFFBQVFDLEdBQUcsQ0FBQ0MsVUFBVSxFQUFFO1FBQzNCLE1BQU0sSUFBSUMsTUFBTTtJQUNsQjtJQUNBLE9BQU9OLHdEQUFRLENBQUNhLFNBQVNWLFFBQVFDLEdBQUcsQ0FBQ0MsVUFBVSxFQUFFO1FBQUVVLFdBQVc7SUFBTTtBQUN0RTtBQUVPLFNBQVNDLFdBQVdDLE9BQWdCO0lBQ3pDLE1BQU1mLFFBQVFlLFFBQVFDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGtCQUFrQkMsTUFBTSxJQUFJLENBQUMsRUFBRTtJQUNqRSxJQUFJLENBQUNsQixPQUFPO1FBQ1YsTUFBTSxJQUFJSSxNQUFNO0lBQ2xCO0lBQ0EsT0FBT0wsWUFBWUM7QUFDckIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb2xsZWdlLXVzZXItbWFuYWdlbWVudC8uL3NyYy9saWIvYXV0aC50cz82NjkyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcclxuXHJcbmludGVyZmFjZSBUb2tlblBheWxvYWQge1xyXG4gIGlkOiBudW1iZXI7XHJcbiAgZW1haWw6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHZlcmlmeVRva2VuKHRva2VuOiBzdHJpbmcpOiBUb2tlblBheWxvYWQge1xyXG4gIHRyeSB7XHJcbiAgICBpZiAoIXByb2Nlc3MuZW52LkpXVF9TRUNSRVQpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdKV1RfU0VDUkVUIGlzIG5vdCBkZWZpbmVkJyk7XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZygnVmVyaWZ5aW5nIHRva2VuIHdpdGggc2VjcmV0OicsIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQpO1xyXG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQpIGFzIFRva2VuUGF5bG9hZDtcclxuICAgIGNvbnNvbGUubG9nKCdEZWNvZGVkIHRva2VuOicsIGRlY29kZWQpO1xyXG4gICAgcmV0dXJuIGRlY29kZWQ7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1Rva2VuIHZlcmlmaWNhdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHRva2VuJyk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUb2tlbihwYXlsb2FkOiB7IGlkOiBudW1iZXI7IGVtYWlsOiBzdHJpbmcgfSk6IHN0cmluZyB7XHJcbiAgaWYgKCFwcm9jZXNzLmVudi5KV1RfU0VDUkVUKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0pXVF9TRUNSRVQgaXMgbm90IGRlZmluZWQnKTtcclxuICB9XHJcbiAgcmV0dXJuIGp3dC5zaWduKHBheWxvYWQsIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQsIHsgZXhwaXJlc0luOiAnMjRoJyB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHZlcmlmeUF1dGgocmVxdWVzdDogUmVxdWVzdCk6IFRva2VuUGF5bG9hZCB7XHJcbiAgY29uc3QgdG9rZW4gPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdBdXRob3JpemF0aW9uJyk/LnNwbGl0KCcgJylbMV07XHJcbiAgaWYgKCF0b2tlbikge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbmF1dGhvcml6ZWQnKTtcclxuICB9XHJcbiAgcmV0dXJuIHZlcmlmeVRva2VuKHRva2VuKTtcclxufSAiXSwibmFtZXMiOlsiand0IiwidmVyaWZ5VG9rZW4iLCJ0b2tlbiIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUIiwiRXJyb3IiLCJjb25zb2xlIiwibG9nIiwiZGVjb2RlZCIsInZlcmlmeSIsImVycm9yIiwiZ2VuZXJhdGVUb2tlbiIsInBheWxvYWQiLCJzaWduIiwiZXhwaXJlc0luIiwidmVyaWZ5QXV0aCIsInJlcXVlc3QiLCJoZWFkZXJzIiwiZ2V0Iiwic3BsaXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/cloudinary.ts":
/*!*******************************!*\
  !*** ./src/lib/cloudinary.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteFromCloudinary: () => (/* binding */ deleteFromCloudinary),\n/* harmony export */   uploadToCloudinary: () => (/* binding */ uploadToCloudinary)\n/* harmony export */ });\n/* harmony import */ var cloudinary__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cloudinary */ \"(rsc)/./node_modules/cloudinary/cloudinary.js\");\n/* harmony import */ var cloudinary__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(cloudinary__WEBPACK_IMPORTED_MODULE_0__);\n\n// Configure Cloudinary\ncloudinary__WEBPACK_IMPORTED_MODULE_0__.v2.config({\n    cloud_name: process.env.CLOUDINARY_CLOUD_NAME,\n    api_key: process.env.CLOUDINARY_API_KEY,\n    api_secret: process.env.CLOUDINARY_API_SECRET\n});\nasync function uploadToCloudinary(file, folder = \"general\") {\n    try {\n        console.log(\"Starting Cloudinary upload to folder:\", folder);\n        // Convert buffer to base64\n        const b64 = Buffer.from(file).toString(\"base64\");\n        // Detect file type from buffer header\n        const fileType = detectFileType(file);\n        console.log(\"File type detection:\", fileType);\n        // Construct appropriate data URI\n        const dataURI = `data:${fileType.mimeType};base64,${b64}`;\n        // Upload to Cloudinary with optimized settings\n        console.log(\"Uploading to Cloudinary with config:\", {\n            folder,\n            resource_type: fileType.resourceType,\n            chunk_size: 6000000,\n            timeout: 120000\n        });\n        const result = await cloudinary__WEBPACK_IMPORTED_MODULE_0__.v2.uploader.upload(dataURI, {\n            folder,\n            resource_type: fileType.resourceType,\n            chunk_size: 6000000,\n            timeout: 120000,\n            overwrite: true,\n            invalidate: true\n        });\n        console.log(\"Cloudinary upload successful:\", {\n            public_id: result.public_id,\n            url: result.secure_url,\n            resource_type: result.resource_type\n        });\n        return {\n            url: result.secure_url,\n            public_id: result.public_id\n        };\n    } catch (error) {\n        console.error(\"Cloudinary upload error:\", error);\n        if (error instanceof Error) {\n            console.error(\"Error details:\", {\n                message: error.message,\n                stack: error.stack\n            });\n        }\n        throw new Error(error instanceof Error ? error.message : \"Failed to upload file to Cloudinary\");\n    }\n}\nfunction detectFileType(buffer) {\n    // Check for common file signatures\n    const header = buffer.slice(0, 4).toString(\"hex\");\n    // Image signatures\n    if (header.startsWith(\"89504e47\")) return {\n        mimeType: \"image/png\",\n        resourceType: \"image\"\n    };\n    if (header.startsWith(\"ffd8\")) return {\n        mimeType: \"image/jpeg\",\n        resourceType: \"image\"\n    };\n    if (header.startsWith(\"47494638\")) return {\n        mimeType: \"image/gif\",\n        resourceType: \"image\"\n    };\n    // Video signatures\n    if (header.startsWith(\"000001\") || header.startsWith(\"ftyp\")) {\n        return {\n            mimeType: \"video/mp4\",\n            resourceType: \"video\"\n        };\n    }\n    // Default to auto if unknown\n    return {\n        mimeType: \"application/octet-stream\",\n        resourceType: \"auto\"\n    };\n}\nasync function deleteFromCloudinary(publicId) {\n    try {\n        console.log(\"Deleting file from Cloudinary:\", publicId);\n        await cloudinary__WEBPACK_IMPORTED_MODULE_0__.v2.uploader.destroy(publicId);\n        console.log(\"Successfully deleted file from Cloudinary:\", publicId);\n    } catch (error) {\n        console.error(\"Cloudinary delete error:\", error);\n        if (error instanceof Error) {\n            console.error(\"Error details:\", {\n                message: error.message,\n                stack: error.stack\n            });\n        }\n        throw new Error(\"Failed to delete file from Cloudinary\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUMsOENBQThDOEI7SUFDNUQsRUFBRSxPQUFPVCxPQUFPO1FBQ2R0QixRQUFRc0IsS0FBSyxDQUFDLDRCQUE0QkE7UUFDMUMsSUFBSUEsaUJBQWlCQyxPQUFPO1lBQzFCdkIsUUFBUXNCLEtBQUssQ0FBQyxrQkFBa0I7Z0JBQzlCRSxTQUFTRixNQUFNRSxPQUFPO2dCQUN0QkMsT0FBT0gsTUFBTUcsS0FBSztZQUNwQjtRQUNGO1FBQ0EsTUFBTSxJQUFJRixNQUFNO0lBQ2xCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb2xsZWdlLXVzZXItbWFuYWdlbWVudC8uL3NyYy9saWIvY2xvdWRpbmFyeS50cz9lMWZhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHYyIGFzIGNsb3VkaW5hcnkgfSBmcm9tICdjbG91ZGluYXJ5JztcclxuXHJcbi8vIENvbmZpZ3VyZSBDbG91ZGluYXJ5XHJcbmNsb3VkaW5hcnkuY29uZmlnKHtcclxuICBjbG91ZF9uYW1lOiBwcm9jZXNzLmVudi5DTE9VRElOQVJZX0NMT1VEX05BTUUsXHJcbiAgYXBpX2tleTogcHJvY2Vzcy5lbnYuQ0xPVURJTkFSWV9BUElfS0VZLFxyXG4gIGFwaV9zZWNyZXQ6IHByb2Nlc3MuZW52LkNMT1VESU5BUllfQVBJX1NFQ1JFVCxcclxufSk7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBsb2FkVG9DbG91ZGluYXJ5KGZpbGU6IEJ1ZmZlciwgZm9sZGVyOiBzdHJpbmcgPSAnZ2VuZXJhbCcpIHtcclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coJ1N0YXJ0aW5nIENsb3VkaW5hcnkgdXBsb2FkIHRvIGZvbGRlcjonLCBmb2xkZXIpO1xyXG4gICAgXHJcbiAgICAvLyBDb252ZXJ0IGJ1ZmZlciB0byBiYXNlNjRcclxuICAgIGNvbnN0IGI2NCA9IEJ1ZmZlci5mcm9tKGZpbGUpLnRvU3RyaW5nKCdiYXNlNjQnKTtcclxuICAgIFxyXG4gICAgLy8gRGV0ZWN0IGZpbGUgdHlwZSBmcm9tIGJ1ZmZlciBoZWFkZXJcclxuICAgIGNvbnN0IGZpbGVUeXBlID0gZGV0ZWN0RmlsZVR5cGUoZmlsZSk7XHJcbiAgICBjb25zb2xlLmxvZygnRmlsZSB0eXBlIGRldGVjdGlvbjonLCBmaWxlVHlwZSk7XHJcbiAgICBcclxuICAgIC8vIENvbnN0cnVjdCBhcHByb3ByaWF0ZSBkYXRhIFVSSVxyXG4gICAgY29uc3QgZGF0YVVSSSA9IGBkYXRhOiR7ZmlsZVR5cGUubWltZVR5cGV9O2Jhc2U2NCwke2I2NH1gO1xyXG4gICAgXHJcbiAgICAvLyBVcGxvYWQgdG8gQ2xvdWRpbmFyeSB3aXRoIG9wdGltaXplZCBzZXR0aW5nc1xyXG4gICAgY29uc29sZS5sb2coJ1VwbG9hZGluZyB0byBDbG91ZGluYXJ5IHdpdGggY29uZmlnOicsIHtcclxuICAgICAgZm9sZGVyLFxyXG4gICAgICByZXNvdXJjZV90eXBlOiBmaWxlVHlwZS5yZXNvdXJjZVR5cGUsXHJcbiAgICAgIGNodW5rX3NpemU6IDYwMDAwMDAsXHJcbiAgICAgIHRpbWVvdXQ6IDEyMDAwMFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xvdWRpbmFyeS51cGxvYWRlci51cGxvYWQoZGF0YVVSSSwge1xyXG4gICAgICBmb2xkZXIsXHJcbiAgICAgIHJlc291cmNlX3R5cGU6IGZpbGVUeXBlLnJlc291cmNlVHlwZSxcclxuICAgICAgY2h1bmtfc2l6ZTogNjAwMDAwMCwgLy8gNk1CIGNodW5rcyBmb3IgdmlkZW9zXHJcbiAgICAgIHRpbWVvdXQ6IDEyMDAwMCwgLy8gMiBtaW51dGVzIHRpbWVvdXQgZm9yIGxhcmdlciBmaWxlc1xyXG4gICAgICBvdmVyd3JpdGU6IHRydWUsXHJcbiAgICAgIGludmFsaWRhdGU6IHRydWUsXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zb2xlLmxvZygnQ2xvdWRpbmFyeSB1cGxvYWQgc3VjY2Vzc2Z1bDonLCB7XHJcbiAgICAgIHB1YmxpY19pZDogcmVzdWx0LnB1YmxpY19pZCxcclxuICAgICAgdXJsOiByZXN1bHQuc2VjdXJlX3VybCxcclxuICAgICAgcmVzb3VyY2VfdHlwZTogcmVzdWx0LnJlc291cmNlX3R5cGVcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHVybDogcmVzdWx0LnNlY3VyZV91cmwsXHJcbiAgICAgIHB1YmxpY19pZDogcmVzdWx0LnB1YmxpY19pZCxcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Nsb3VkaW5hcnkgdXBsb2FkIGVycm9yOicsIGVycm9yKTtcclxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRldGFpbHM6Jywge1xyXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICAgICAgc3RhY2s6IGVycm9yLnN0YWNrXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byB1cGxvYWQgZmlsZSB0byBDbG91ZGluYXJ5Jyk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBkZXRlY3RGaWxlVHlwZShidWZmZXI6IEJ1ZmZlcik6IHsgbWltZVR5cGU6IHN0cmluZzsgcmVzb3VyY2VUeXBlOiAnaW1hZ2UnIHwgJ3ZpZGVvJyB8ICdhdXRvJyB9IHtcclxuICAvLyBDaGVjayBmb3IgY29tbW9uIGZpbGUgc2lnbmF0dXJlc1xyXG4gIGNvbnN0IGhlYWRlciA9IGJ1ZmZlci5zbGljZSgwLCA0KS50b1N0cmluZygnaGV4Jyk7XHJcbiAgXHJcbiAgLy8gSW1hZ2Ugc2lnbmF0dXJlc1xyXG4gIGlmIChoZWFkZXIuc3RhcnRzV2l0aCgnODk1MDRlNDcnKSkgcmV0dXJuIHsgbWltZVR5cGU6ICdpbWFnZS9wbmcnLCByZXNvdXJjZVR5cGU6ICdpbWFnZScgfTtcclxuICBpZiAoaGVhZGVyLnN0YXJ0c1dpdGgoJ2ZmZDgnKSkgcmV0dXJuIHsgbWltZVR5cGU6ICdpbWFnZS9qcGVnJywgcmVzb3VyY2VUeXBlOiAnaW1hZ2UnIH07XHJcbiAgaWYgKGhlYWRlci5zdGFydHNXaXRoKCc0NzQ5NDYzOCcpKSByZXR1cm4geyBtaW1lVHlwZTogJ2ltYWdlL2dpZicsIHJlc291cmNlVHlwZTogJ2ltYWdlJyB9O1xyXG4gIFxyXG4gIC8vIFZpZGVvIHNpZ25hdHVyZXNcclxuICBpZiAoaGVhZGVyLnN0YXJ0c1dpdGgoJzAwMDAwMScpIHx8IGhlYWRlci5zdGFydHNXaXRoKCdmdHlwJykpIHtcclxuICAgIHJldHVybiB7IG1pbWVUeXBlOiAndmlkZW8vbXA0JywgcmVzb3VyY2VUeXBlOiAndmlkZW8nIH07XHJcbiAgfVxyXG4gIFxyXG4gIC8vIERlZmF1bHQgdG8gYXV0byBpZiB1bmtub3duXHJcbiAgcmV0dXJuIHsgbWltZVR5cGU6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nLCByZXNvdXJjZVR5cGU6ICdhdXRvJyB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlRnJvbUNsb3VkaW5hcnkocHVibGljSWQ6IHN0cmluZykge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZygnRGVsZXRpbmcgZmlsZSBmcm9tIENsb3VkaW5hcnk6JywgcHVibGljSWQpO1xyXG4gICAgYXdhaXQgY2xvdWRpbmFyeS51cGxvYWRlci5kZXN0cm95KHB1YmxpY0lkKTtcclxuICAgIGNvbnNvbGUubG9nKCdTdWNjZXNzZnVsbHkgZGVsZXRlZCBmaWxlIGZyb20gQ2xvdWRpbmFyeTonLCBwdWJsaWNJZCk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Nsb3VkaW5hcnkgZGVsZXRlIGVycm9yOicsIGVycm9yKTtcclxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRldGFpbHM6Jywge1xyXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICAgICAgc3RhY2s6IGVycm9yLnN0YWNrXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZGVsZXRlIGZpbGUgZnJvbSBDbG91ZGluYXJ5Jyk7XHJcbiAgfVxyXG59ICJdLCJuYW1lcyI6WyJ2MiIsImNsb3VkaW5hcnkiLCJjb25maWciLCJjbG91ZF9uYW1lIiwicHJvY2VzcyIsImVudiIsIkNMT1VESU5BUllfQ0xPVURfTkFNRSIsImFwaV9rZXkiLCJDTE9VRElOQVJZX0FQSV9LRVkiLCJhcGlfc2VjcmV0IiwiQ0xPVURJTkFSWV9BUElfU0VDUkVUIiwidXBsb2FkVG9DbG91ZGluYXJ5IiwiZmlsZSIsImZvbGRlciIsImNvbnNvbGUiLCJsb2ciLCJiNjQiLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJmaWxlVHlwZSIsImRldGVjdEZpbGVUeXBlIiwiZGF0YVVSSSIsIm1pbWVUeXBlIiwicmVzb3VyY2VfdHlwZSIsInJlc291cmNlVHlwZSIsImNodW5rX3NpemUiLCJ0aW1lb3V0IiwicmVzdWx0IiwidXBsb2FkZXIiLCJ1cGxvYWQiLCJvdmVyd3JpdGUiLCJpbnZhbGlkYXRlIiwicHVibGljX2lkIiwidXJsIiwic2VjdXJlX3VybCIsImVycm9yIiwiRXJyb3IiLCJtZXNzYWdlIiwic3RhY2siLCJidWZmZXIiLCJoZWFkZXIiLCJzbGljZSIsInN0YXJ0c1dpdGgiLCJkZWxldGVGcm9tQ2xvdWRpbmFyeSIsInB1YmxpY0lkIiwiZGVzdHJveSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/cloudinary.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/lodash","vendor-chunks/semver","vendor-chunks/cloudinary","vendor-chunks/jsonwebtoken","vendor-chunks/jws","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/safe-buffer","vendor-chunks/q","vendor-chunks/ms","vendor-chunks/lodash.once","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isplainobject","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isinteger","vendor-chunks/lodash.isboolean","vendor-chunks/lodash.includes","vendor-chunks/jwa","vendor-chunks/buffer-equal-constant-time"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=E%3A%5CBE%20Project%5CBE-project%20ff%5CBE%20proj%205-2-25%5Cproject%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CBE%20Project%5CBE-project%20ff%5CBE%20proj%205-2-25%5Cproject&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();